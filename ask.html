<!DOCTYPE html>
<html lang="en-us">
    <head>
    <meta charset="UTF-8">
    <noscript>Your browser does not support JavaScript!</noscript>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAGM</title>
    <link rel="icon" type="image/x-icon" href="image/S_small.png">
    <meta name="keyword" content="웹페이지 제작">
    <meta name="description" content="웹페이지 제작">
    <meta name="author" content="SAGM Lee">
    <meta name="application-name" content="SAGM">
    <link rel="stylesheet" type="text/css" href="css\ask.css">
    </head>

<body>
<a class="toindex">닫기</a>
<div class="inc"></div>
<form method="post" id="myForm" class="gform" data-email="mstbright.249@gmail.com" 
action="https://script.google.com/macros/s/AKfycbyhkqN9AEdyI7Jj2fU9cafQ1JRa28-L8YgXcdK7hCEvkpU-zHmeRSc51hWUrHicjKMY/exec" onsubmit="return submitForm();">
<div class="section basic" id="s1">
    <div class="head">안녕하세요!<br>연락받으실 분의 정보를 알려주세요.</div>
    <div class="commm">
        <section>
        <div class="basic1"><label for="name">담당자 이름</label>
        <input type="text" id="name" name="name" required>
        <div class="erm" id="nameerm"></div>
        </div>

        <div class="basic1"><label for="company">업체 및 팀명<span class="subs"> (선택)</span></label>
        <input type="text" id="company" name="company">
        </div>

        <div class="basic1"><label for="summary">업종 및 서비스품목</label>
        <input type="text" id="summary" name="summary" required>
        <div class="erm" id="summaryerm"></div></div>

        <div class="basic1"><label for="phone">핸드폰번호</label>
        <input type="tel" id="phone" name="phone" pattern="[0-9]{3}-[0-9]{3,4}-[0-9]{4}" required maxlength="13" placeholder="'-'를 제외한 11자리 숫자">
        <div class="erm" id="phoneerm"></div></div>

        <div class="basic1"><label for="email">이메일 주소</label>
        <input type="email" id="email" name="email" required>
        <div class="erm" id="emailerm"></div></div>
        </section>
    </div>
    <div class="blank" style="height: 80px;"></div>
    <a href="#s2" class="updown">다음</a>
</div>
<div class="section" id="s2">
    <div class="head">어떤 용도의 웹사이트인가요?</div>
    <div class="sub">하나 이상 선택해주세요. 중복선택이 가능합니다.</div>

    <div class="infocheck infocheckcolumn">
        <div class="kind">
        <div class="kinda"><input type="checkbox" id="portfolio" name="selection1[]" value="포트폴리오">
        <label for="portfolio"><img src="image/ask1.png"><div class="last"><div class="kmain">포트폴리오</div><div class="ksub">작품들이 돋보이도록 합니다.</div></div></label></div>
        
        <div class="kinda"><input type="checkbox" id="companyIntro" name="selection1[]" value="업체 및 팀 소개">
        <label for="companyIntro"><img src="image/ask2.png"><div class="last"><div class="kmain">업체 및 팀 소개</div><div class="ksub">팀이나 회사의 신뢰성을 보여줍니다.</div></div></label></div>
        
        <div class="kinda"><input type="checkbox" id="productSales" name="selection1[]" value="서비스 / 상품 판매">
        <label for="productSales"><img src="image/ask3.png"><div class="last"><div class="kmain">서비스 및 상품 판매</div><div class="ksub">상품을 더욱 가치있어 보이도록 만듭니다.</div></div></label></div>
        </div>

        <div class="otherfor"><input type="checkbox" id="otherweb" name="selection1[]" value="그 외 웹사이트">
        <label for="otherweb">그 외</label>
        <input type="text" class="textleft" id="other1" name="other1"></div>
    </div>

    <div class="blank"></div>
    <a href="#s3" class="updown">다음</a>
</div>
<div class="section" id="s3">
    <div class="head">어떤 내용이 중요하게 들어가나요?</div>
    <div class="sub">하나 이상 선택해주세요. 중복선택이 가능합니다.</div>
    <div class="infocheck">
    <div><input type="checkbox" id="companyTeamInfo" name="selection2[]" value="회사 및 팀 정보">
    <label for="companyTeamInfo">회사 및 팀 정보</label></div>

    <div><input type="checkbox" id="ceoAuthorInfo" name="selection2[]" value="Ceo 및 저자 정보">
    <label for="ceoAuthorInfo">Ceo 및 저자 정보</label></div>

    <div><input type="checkbox" id="teamMemberInfo" name="selection2[]" value="팀원 정보">
    <label for="teamMemberInfo">팀원 정보</label></div>

    <div><input type="checkbox" id="companyHistory" name="selection2[]" value="회사 및 팀 연혁">
    <label for="companyHistory">회사 및 팀 연혁</label></div>

    <div><input type="checkbox" id="companyStructure" name="selection2[]" value="회사 내부 구조">
    <label for="companyStructure">회사 내부 구조</label></div>

    <div><input type="checkbox" id="servicePortfolio" name="selection2[]" value="포트폴리오">
    <label for="servicePortfolio">포트폴리오</label></div>

    <div><input type="checkbox" id="productInfo" name="selection2[]" value="서비스 및 상품 정보">
    <label for="productInfo">서비스 및 상품 정보</label></div>

    <div><input type="checkbox" id="contact" name="selection2[]" value="연락처">
    <label for="contact">연락처</label></div>

    <div><input type="checkbox" id="consultation" name="selection2[]" value="상담 접수">
    <label for="consultation">상담 접수</label></div>

    <div><input type="checkbox" id="otherinfo" name="selection2[]" value="그 외 정보">
    <label for="otherinfo">그 외</label>
    <input type="text" class="textleft" id="other2" name="other2"></div>
    </div>
    <div class="blank"></div>
    <a href="#s4" class="updown">다음</a>
</div>
<div class="section" id="s4">
    <div class="head">어떤 서비스가 필요하신가요?</div>
    <div class="sub">해당사항이 없으면 다음을 눌러주세요. 중복선택이 가능합니다.</div>
    <div class="infocheck">
    <div><input type="checkbox" id="loginService" name="selection3[]" value="로그인 서비스">
    <label for="loginService">로그인 서비스</label></div>

    <div><input type="checkbox" id="postManagement" name="selection3[]" value="게시글 등록 및 수정 서비스">
    <label for="postManagement">게시글 등록 및 수정 서비스</label></div>

    <div><input type="checkbox" id="memberManagement" name="selection3[]" value="회원관리 서비스">
    <label for="memberManagement">회원관리 서비스</label></div>

    <div><input type="checkbox" id="otherservice" name="selection3[]" value="그 외 서비스">
    <label for="otherservice">그 외</label>
    <input type="text" class="textleft" id="other3" name="other3"></div>
    </div>

    <div class="blank"></div>
    <a href="#s5" class="updown">다음</a>
</div>
<div class="section" id="s5">
    <div class="head">요청사항이나 궁금한 사항이 있나요?</div>
    <div class="sub bsub">제공받은 정보를 상담 외 다른 용도로 사용하지 않습니다.<br>
        적어주신 이메일 주소로 연락 가능한 연락처를 보내드립니다.</div>
    <textarea id="additionalRequest" name="additionalRequest" placeholder="선택사항입니다."></textarea>
    <input type="submit" class="updown" id="submitBtn" value="전송">
    <div style="display:none" class="ing">전송중</div>
    <div style="display:none" class="thankyou_message">폼이 제출되었습니다. 감사합니다.</div>
</div>

<div class="section validvalid"></div>
</form>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const form = document.getElementById("myForm");
    const scrollIndicator = document.querySelector(".inc");

    form.addEventListener("scroll", function() {
        const formHeight = form.scrollHeight - form.clientHeight;
        const scrollPercentage = (form.scrollTop / formHeight) * 100;
        scrollIndicator.style.height = scrollPercentage + "%";
    });
});

function formatPhoneNumber(inputId) {
    const phoneInput = document.getElementById(inputId);
    const phoneNumber = phoneInput.value.replace(/\D/g, '');
    const formattedPhoneNumber = phoneNumber.replace(/(\d{3})(\d{3,4})(\d{4})/, '$1-$2-$3');
    phoneInput.value = formattedPhoneNumber;
}
document.getElementById('phone').addEventListener('input', function() {
    formatPhoneNumber('phone');
});

function validateField(fieldId) {
    const inputField = document.getElementById(fieldId);
    const errorDiv = document.getElementById(`${fieldId}erm`);
    const trimmedValue = inputField.value.trim();

    // 에러 메시지 초기화
    errorDiv.textContent = '';

    // 필드가 비어있으면 에러 메시지를 표시
    if (trimmedValue === '') {
        errorDiv.textContent = '필수 입력입니다.';
        return false;
    }

    // 핸드폰 번호 유효성 검사
    if (fieldId === 'phone') {
        const phoneRegex = /^[0-9]{3}-[0-9]{3,4}-[0-9]{4}$/;
        if (!phoneRegex.test(trimmedValue)) {
            errorDiv.textContent = "'-'를 제외한 11자리 숫자를 입력해주세요";
            return false;
        }
    }

    // 이메일 주소 유효성 검사
    if (fieldId === 'email') {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(trimmedValue)) {
            errorDiv.textContent = '올바른 이메일 주소 형식이 아닙니다.';
            return false;
        }
    }

    return true;
}

// 각 필드의 blur 이벤트를 감지하여 validateField 함수를 호출합니다.
const fields = ['name', 'summary', 'phone', 'email'];

fields.forEach(fieldId => {
    const inputField = document.getElementById(fieldId);
    
    // input 이벤트 (입력할 때마다)에 대해 validateField 함수를 호출합니다.
    inputField.addEventListener('input', function() {
        validateField(fieldId);
    });

    // blur 이벤트 (포커스를 잃을 때)에 대해도 validateField 함수를 호출합니다.
    inputField.addEventListener('blur', function() {
        validateField(fieldId);
    });
});

const submitBtn = document.getElementById('submitBtn');
const ingDiv = document.querySelector('.ing');
const thankyouMessageDiv = document.querySelector('.thankyou_message');
const basicDiv = document.querySelector('.basic'); // .basic 요소를 가져옴

submitBtn.addEventListener('click', function() {
    ingDiv.style.display = 'block';
});

basicDiv.addEventListener('mouseover', function() {
    ingDiv.style.display = 'none';
});

function checkThankYouMessageDisplay() {
    if (thankyouMessageDiv.style.display === 'block') {
        ingDiv.style.display = 'none';
    }
}

const observer = new MutationObserver(function(mutationsList, observer) {
    for (let mutation of mutationsList) {
        if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
            checkThankYouMessageDisplay();
        }
    }
});

observer.observe(thankyouMessageDiv, {
    attributes: true,
    attributeFilter: ['style'],
    attributeOldValue: true
});

</script>
<script data-cfasync="false" type="text/javascript" src="js/form-submission-handler.js"></script>
<script>
    document.querySelector('.toindex').addEventListener('click', function() {
        window.parent.postMessage('hideNews', '*');
    });
</script>
</body>
</html>
    